<!DOCTYPE html>
<html layout:decorate="~{layout}" xmlns:layout="http://www.w3.org/1999/xhtml">
<div layout:fragment="content" class="content-area d-flex justify-content-center align-items-center">
    <head>
        <style>
            body, html {
           height: 100%;
           margin: 0;
       }

      body {
       background-image: linear-gradient(to top, #a8edea 0%, #fed6e3 100%);
         background-size: cover;
         background-attachment: fixed;
         color: #555;
        font-family: sans-serif;
      }
        </style>
        <meta charset="UTF-8">
        <title>Ï§ëÍ≥† Í±∞Îûò</title>
    </head>
    <body>
    <!-- Section-->
    <section class="py-5" style="width: 100rem;">
        <div class="d-flex justify-content-start">
                <div class="container">
                    <div class="row row-cols-1">
                        <h2>ÎÇ¥ ÎßàÏºì(ÎÇ¥Í∞Ä ÌåêÎß§Ï§ëÏù∏ ÏÉÅÌíà)</h2>
                        <div class="col" style="">
                            <a type="button" class="btn btn-primary" th:href="@{|/resalePost/myMarket|}">ÎÇ¥Í∞Ä ÌåêÎß§Ï§ëÏù∏ ÏÉÅÌíà</a>
                            <a type="button" class="btn btn-primary" th:href="@{|/resalePost/myWishList|}">Í¥ÄÏã¨Î™©Î°ù</a>
                            <a type="button" class="btn btn-primary" th:href="@{|/resalePost/soldOutResalePosts|}">ÌåêÎß§ÎÇ¥Ïó≠</a>
                            <a type="button" class="btn btn-primary" th:href="@{|/resalePost/purchaseHistory|}">Íµ¨Îß§ÎÇ¥Ïó≠</a>
                        </div>
                    </div>
                </div>
        </div>
        <div class="d-flex justify-content-end">
            <!--            <form th:action="@{/post/search}" class="d-flex" role="search">-->
            <!--                <div class="input-group">-->
            <!--                    <input class="form-control me-2" type="text" id="search_kw" name="kw" placeholder="Í±∞Îûò Í≤åÏãúÍ∏Ä Ï†úÎ™©Ïù¥ÎÇò ÎÇ¥Ïö©ÏùÑ Í≤ÄÏÉâÌïòÏÑ∏Ïöî." aria-label="Search"-->
            <!--                           style="width: 330px;" th:value="${kw}">-->
            <!--                    <button class="btn btn-outline-success" type="submit">üîç</button>-->
            <!--                </div>-->
            <!--            </form>-->
            <a type="button" class="btn btn-primary" th:href="@{|/resalePost/createResalePost|}">Í±∞ÎûòÍ∏Ä Ïì∞Í∏∞</a>

            <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="resaleDropdown"
                        data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Ï§ëÍ≥†Í±∞Îûò
                </button>
                <ul class="dropdown-menu" aria-labelledby="resaleDropdown">
                    <li><a class="dropdown-item" th:href="@{|/resalePost/myWishList|}">Í¥ÄÏã¨Î™©Î°ù</a></li>
                    <li><a class="dropdown-item" th:href="@{|/resalePost/soldOutResalePosts|}">ÌåêÎß§ÎÇ¥Ïó≠</a></li>
                    <li><a class="dropdown-item" th:href="@{|/resalePost/purchaseHistory|}">Íµ¨Îß§ÎÇ¥Ïó≠</a></li>
                    <li class="dropdown-divider"></li>
                    <li><a class="dropdown-item" th:href="@{|/resalePost/myMarket|}">ÎÇ¥ ÎßàÏºì Î≥¥Í∏∞</a></li>
                </ul>
            </div>
        </div>
        <div class="container px-3 px-lg-5 mt-5">
            <!--            <div class="row gx-3 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-start">-->
            <!--            <div class="d-flex justify-content-start">-->
            <!--                <form th:action="@{/resalePost/search}" class="d-flex" role="search">-->
            <!--                    <div class="input-group">-->
            <!--                        <input class="form-control me-2" type="text" id="search_kw" name="kw"-->
            <!--                               placeholder="Í±∞Îûò Í≤åÏãúÍ∏Ä Ï†úÎ™©Ïù¥ÎÇò ÎÇ¥Ïö©ÏùÑ Í≤ÄÏÉâÌïòÏÑ∏Ïöî." aria-label="Search"-->
            <!--                               style="width: 330px;" th:value="${kw}">-->
            <!--                        <button class="btn btn-outline-success" type="submit">üîç</button>-->
            <!--                    </div>-->
            <!--                </form>-->
            <!--                <a type="button" class="btn btn-primary" th:href="@{|/resalePost/main|}">Í≤ÄÏÉâÏñ¥ Ï¥àÍ∏∞Ìôî</a>-->
            <!--            </div>-->
            <div class="row gx-3 gx-lg-5 row-cols-1 row-cols-md-4 row-cols-xl-4 justify-content-center">
                <!--============================Ïù¥Î∂ÄÎ∂Ñ eachÎ¨∏ÏúºÎ°ú Ìè¨Ïä§Ìä∏ Ï†ÅÏö©ÌïòÎ©¥ Îê©ÎãàÎã§.=====================================-->
                <div th:each="post : ${paging}" class="col mb-5">
                    <a th:href=@{|/resalePost/detail/${post.id}/0|} style="text-decoration: none; color:inherit; ">
                        <div class="card h-100">
                            <!--post image-->
                            <!--                            <div th:each="img, iterStat : ${post.postImages}" th:if="${iterStat.index lt 1}">-->
                            <!--                                <img class="card-img-top" th:src="@{|/resources/${img.saveName}|}" alt="post image" style="width:100%; height:300px;">-->
                            <!--                            </div>-->
                            <div th:if="${not #lists.isEmpty(post.resalePostImages)}">
                                <div th:each="img, iterStat : ${post.resalePostImages}" th:if="${iterStat.index lt 1}">
                                    <img class="card-img-top" th:src="@{|/resources/${img.saveName}|}" alt="post image"
                                         style="width:100%; height:250px;">
                                </div>
                            </div>
                            <div th:unless="${post.resalePostImages != null and not #lists.isEmpty(post.resalePostImages)}">
                                <!-- Use a default image if post.postImages is empty -->
                                <!--                                <img class="card-img-top" th:src="@{|/resources/no_img.jpg|}" alt="default image" style="width:100%; height:300px;">-->
                                <img class="card-img-top" src="no_img.jpg" alt="default image"
                                     style="width:100%; height:300px;">
                            </div>
                            <!-- post-->
                            <div class="card-body p-4">
                                <div class="text-center">
                                    <!--post title-->
                                    <h5 class="fw-bolder" th:text="${post.title}"></h5>
                                    <!--post content-->
                                    <span th:text="'Í∞ÄÍ≤© : ' + ${post.price} + 'Ïõê'"></span>
                                    <div th:text="'Ï°∞ÌöåÏàò : ' + ${post.view}"></div>
                                    <div th:text="'Ï∞úÌïú ÌöåÏõê : ' + ${post.wishProfiles.size() + 'Î™Ö'}"></div>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
                <!-- ========================Ïó¨Í∏∞ÍπåÏßÄ eachÎ¨∏ÏúºÎ°ú Ìè¨Ïä§Ìä∏ Ï†ÅÏö©ÌïòÎ©¥ Îê©ÎãàÎã§=======================.-->
            </div>
        </div>
        <!-- ÌéòÏù¥ÏßïÏ≤òÎ¶¨ ÏãúÏûë -->
        <div th:if="${kw}==null">
            <div th:if="${!paging.isEmpty()}">
                <ul class="pagination justify-content-center">
                    <li class="page-item" th:classappend="${!paging.hasPrevious} ? 'disabled'">
                        <a class="page-link"
                           th:href="@{|?page=${paging.number-1}|}">
                            <span>Ïù¥Ï†Ñ</span>
                        </a>
                    </li>
                    <li th:each="page: ${#numbers.sequence(1, paging.totalPages)}"
                        th:if="${page >= paging.number-5 and page <= paging.number+5}"
                        th:classappend="${page == paging.number+1} ? 'active'"
                        class="page-item">
                        <a th:text="${page}" class="page-link" th:href="@{|?page=${page-1}|}"></a>
                    </li>
                    <li class="page-item" th:classappend="${!paging.hasNext} ? 'disabled'">
                        <a class="page-link" th:href="@{|?page=${paging.number+1}|}">
                            <span>Îã§Ïùå</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- ÌéòÏù¥ÏßïÏ≤òÎ¶¨ ÎÅù -->
        <!-- ÌéòÏù¥ÏßïÏ≤òÎ¶¨ ÏãúÏûë -->
        <div th:if="${kw}!=null">
            <div th:if="${!paging.isEmpty()}">
                <ul class="pagination justify-content-center">
                    <li class="page-item" th:classappend="${!paging.hasPrevious} ? 'disabled'">
                        <a class="page-link" th:href="@{|/resalePost/search?kw=${kw}&page=${paging.number-1}|}">
                            <span>Ïù¥Ï†Ñ</span>
                        </a>
                    </li>
                    <li th:each="page: ${#numbers.sequence(1, paging.totalPages)}"
                        th:if="${page >= paging.number-5 and page <= paging.number+5}"
                        th:classappend="${page == paging.number+1} ? 'active'"
                        class="page-item">
                        <a th:text="${page}" class="page-link"
                           th:href="@{|/resalePost/search?kw=${kw}&page=${page-1}|}"></a>
                    </li>
                    <li class="page-item" th:classappend="${!paging.hasNext} ? 'disabled'">
                        <a class="page-link" th:href="@{|/resalePost/search?kw=${kw}&page=${paging.number+1}|}">
                            <span>Îã§Ïùå</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- ÌéòÏù¥ÏßïÏ≤òÎ¶¨ ÎÅù -->
    </section>
    </body>
</div>
</html>
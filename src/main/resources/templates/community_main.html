<!DOCTYPE html>
<html layout:decorate="~{layout}" xmlns:layout="http://www.w3.org/1999/xhtml" xmlns:th="http://www.w3.org/1999/xhtml">
<div layout:fragment="content" class="content-area d-flex justify-content-center align-items-center">


    <div class="container">
        <div>
            <div class="container">
                <div class="row row-cols-3">
                    <div class="col" style="">
                        <a type="button" class="btn btn-outline-warning" th:href="@{|/post/community/main|}">전체</a>
                        <a type="button" class="btn btn-outline-warning" th:href="@{|/post/community/main?searchTagName=강아지|}">강아지</a>
                        <a type="button" class="btn btn-outline-warning" th:href="@{|/post/community/main?searchTagName=고양이|}">고양이</a>
                        <a type="button" class="btn btn-outline-warning" th:href="@{|/post/community/main?searchTagName=기타|}">기타</a>
                    </div>
                    <div class="col" style="border:1px solid;">
                        <a href="#">자유/</a>
                        <a href="#">QnA/</a>
                        <a href="#">??</a>
                    </div>
                    <div class="col" style="border:1px solid;">
                        <a href="#">글쓰기</a>
                    </div>
                </div>
            </div>
            <div class="btn-group">
                <a th:href="@{/post/community/main(sort='latest')}" class="btn btn-primary">최신순</a>
                <a th:href="@{/post/community/main(sort='likeCount')}" class="btn btn-primary">인기 많은순</a>
                <a th:href="@{/post/community/main(sort='commentCount')}" class="btn btn-primary">댓글 많은순</a>
            </div>
            <div class="row row-cols-1 align-items-center">
                <div class="col">
                    <!--============================이부분 each문으로 포스트 적용하면 됩니다.=====================================-->
                    <div class="col" th:each="post, loop : ${paging}">
                        <div class="card" style="width: 100%;">
                            <div class="d-flex">
                                <!-- 이미지를 표시하려면 post에 이미지 경로 등이 들어있는 속성을 사용해야 합니다. -->
                                <div th:each="img, iterStat : ${post.postImages}" th:if="${iterStat.index lt 3}">
                                    <img class="me-3" th:src="@{|/resources/${img.saveName}|}" alt="리뷰 이미지"
                                         style="width: 14rem; height: 17rem; border-radius: 1rem; max-width: 100%; max-height: 100%">
                                </div>
                                <div class="card-body">
                                    <!--                                <a th:href="'/post/' + ${post.id}" style="text-decoration: none; color:inherit;">-->
                                    <h5 class="card-title">게시물제목 :
                                        <a th:href=@{|/post/detail/${post.id}/0|} th:text="${post.title}"></a>
                                    </h5>
                                    <!--                                    <p th:text="${post.someProperty}"></p>-->
                                    <p class="card-text" th:text="${post.content}">게시물내용</p>
                                    <!--                                </a>-->
                                    <!--                                <a th:href="'/profile/' + ${post.userId}" style="text-decoration: none; color:inherit;">-->
                                    <!--                                    <p class="text-muted">프로필이미지+ 닉넴 ( 프로필로 이동)</p>-->
                                    <!--                                </a>-->
                                    <div>
                                    <div style="margin-top: 30px;" th:text="${post.author.profileName}"></div>
                                        <div>
                                            <div th:if="${post.modifyDate != null}">
                                                <span th:text="${#temporals.format(post.modifyDate, 'yyyy년 MM월 dd일 HH:mm')}"></span>
                                            </div>
                                            <div th:unless="${post.modifyDate != null}">
                                                <span th:text="${#temporals.format(post.createDate, 'yyyy년 MM월 dd일 HH:mm')}"></span>
                                            </div>
                                        </div>
                                        <span id="voteCount" th:text="${'좋아요 : '+post.likeMembers.size()}"></span>
                                        <p th:text="|${'댓글 : ' + #lists.size(post.comments)}|"></p>
                                    </div>
                                    <p style="margin-top: 10px; font-size: 17px; " th:if="${!post.getTagList().isEmpty()}">
                                        <span th:each="tag, loop : ${post.getTagList()}" th:text="@{|#${tag.name}|}"></span>
                                    </p>
                                    <div>
                                        <p th:text="${'조회수 : ' + post.view}"></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 페이징처리 시작 -->
                    <div th:if="${!paging.isEmpty()}">
                        <ul class="pagination justify-content-center">
                            <li class="page-item" th:classappend="${!paging.hasPrevious} ? 'disabled'">
                                <a class="page-link" th:href="@{|/post/community/main?page=${paging.number-1}&sort=${sort}&searchTagName=${searchTagName}|}">
                                    <span>이전</span>
                                </a>
                            </li>
                            <li th:each="page: ${#numbers.sequence(1, paging.totalPages)}"
                                th:if="${page >= paging.number-5 and page <= paging.number+5}"
                                th:classappend="${page == paging.number+1} ? 'active'"
                                class="page-item">
                                <a th:text="${page}" class="page-link" th:href="@{|/post/community/main?page=${page-1}&sort=${sort}&searchTagName=${searchTagName}|}"></a>
                            </li>
                            <li class="page-item" th:classappend="${!paging.hasNext} ? 'disabled'">
                                <a class="page-link" th:href="@{|/post/community/main?page=${paging.number+1}&sort=${sort}&searchTagName=${searchTagName}|}">
                                    <span>다음</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!-- 페이징처리 끝 -->
                    <!--============================여기까지 each문으로 포스트 적용하면 됩니다.=====================================-->
                    <!--============================아래부분 예시. 추후 삭제 예정 =====================================-->
                </div>
            </div>
        </div>
    </div>
</div>
</html>
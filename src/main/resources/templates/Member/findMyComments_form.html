<!DOCTYPE html>
<html layout:decorate="~{layout}" xmlns:layout="http://www.w3.org/1999/xhtml" xmlns:th="http://www.w3.org/1999/xhtml">
<div layout:fragment="content" class="content-area d-flex justify-content-center align-items-center">

    <div class="container">
        <div>
            <div class="row row-cols-1 align-items-center">
                <div class="col">
                    <div class="container">
                        <div class="row row-cols-1">
                            <div class="col" style="">
                                <a type="button" class="btn btn-outline-warning" th:href="@{|/profile/myPage|}">ÌöåÏõê Ï†ïÎ≥¥</a>
                                <a type="button" class="btn btn-outline-warning" th:href="@{|/post/myPosts|}">ÎÇ¥Í∞Ä Ïì¥ Í∏Ä</a>
                                <a type="button" class="btn btn-outline-warning" th:href="@{|/comment/myComments|}">ÎÇ¥Í∞Ä Ïì¥ ÎåìÍ∏Ä</a>
                                <a type="button" class="btn btn-outline-warning" th:href="@{|/post/myLikedPosts|}">Ï¢ãÏïÑÏöî ÎàÑÎ•∏ Í∏Ä</a>
                                <a type="button" class="btn btn-outline-warning" th:href="@{|/comment/myLikedComments|}">Ï¢ãÏïÑÏöî ÎàÑÎ•∏ ÎåìÍ∏Ä</a>
                                <a type="button" class="btn btn-outline-warning" th:href="@{|/chat/myChatRoom|}">ÎÇ¥Í∞Ä Ï∞∏Ïó¨Ìïú Ï±ÑÌåÖÎ∞© Î™©Î°ù</a>
                            </div>

                        </div>
                    </div>
                    <h2>ÎÇ¥Í∞Ä Ïì¥ ÎåìÍ∏Ä Î™©Î°ù</h2>
                    <!--============================Ïù¥Î∂ÄÎ∂Ñ eachÎ¨∏ÏúºÎ°ú Ìè¨Ïä§Ìä∏ Ï†ÅÏö©ÌïòÎ©¥ Îê©ÎãàÎã§.=====================================-->
                    <div class="col" th:each="comment, loop : ${paging}">
                        <div class="card" style="width: 100%; background:transparent;">
                            <div class="d-flex">
                                <div th:if="${not #lists.isEmpty(comment.post.postImages)}">
                                    <div th:each="img, iterStat : ${comment.post.postImages}" th:if="${iterStat.index lt 1}">
                                        <img class="card-img-top" th:src="@{|/resources/${img.saveName}|}" alt="post image" style="width: 14rem; height: 17rem; border-radius: 1rem; max-width: 100%; max-height: 100%">
                                    </div>
                                </div>
                                <div th:unless="${comment.post.postImages != null and not #lists.isEmpty(comment.post.postImages)}">
                                    <img class="card-img-top" th:src="@{|/img/no_img.jpg|}" alt="default image" style="width: 14rem; height: 17rem; border-radius: 1rem; max-width: 100%; max-height: 100%">
                                </div>
                                <div class="card-body" style="display: flex; flex-direction: column; height: 100%;">
                                    <h3 th:if="${comment.parentComment != null}" th:text="${comment.parentComment.content +'Ïóê Îã¨Î¶∞ ÎåÄÎåìÍ∏Ä'}">
                                    </h3>
                                    <h5 class="card-title">
                                        <a th:href=@{|/post/detail/${comment.post.id}/0|} th:text="${#strings.length(comment.post.title) &gt; 20 ? #strings.substring(comment.post.title, 0, 20) + ' . . . ' : 'ÎÇ¥Í∞Ä ÎåìÍ∏ÄÏùÑ ÏûëÏÑ±Ìïú Í≤åÏãúÎ¨º : ' + comment.post.title}" style="font-weight:bold; text-decoration: none; color:inherit;"></a>
                                    </h5>
                                    <p class="card-text text-muted" th:text="${#strings.length(comment.content) &gt; 50 ? #strings.substring(comment.content, 0, 50) + ' . . . ' : 'ÎÇ¥Í∞Ä ÏûëÏÑ±Ìïú ÎåìÍ∏Ä ÎÇ¥Ïö© : ' + comment.content}" style="width:400px;"></p>
                                    <!--                                        <span th:text="${#strings.length(post.content) &gt; 100 ? #strings.substring(post.content, 0, 30) + ' . . . ' : post.content}"></span>-->
                                    <div style="display:flex; flex-direction:column; justify-content:flex-end align-self:flex-end">
                                        <div>
                                            <div style="margin-top: 10px; font-size: 17px; display:inline;" th:if="${!comment.post.getTagList().isEmpty()}">
                                                <span th:each="tag, loop : ${comment.post.getTagList()}" th:text="' '+ @{|#${tag.name}|}"></span>
                                            </div>
                                            <form th:if="${comment.post.author.member.role != 'ROLE_ADMIN'}" th:action="@{|/profile/detail/${comment.post.author.profileName}|}" style="display:inline;">
                                                <!--                                                <input type="hidden" name="postid" th:value="${post.id}">-->
                                                <button type="submit" class="btn btn-link"
                                                        th:text="${comment.post.author.profileName}"
                                                        style="font-weight:bold; text-decoration:none; color:inherit; display:inline;"></button>
                                            </form>
                                        </div>
                                        <div>
                                                <span style="display:inline;">
                                                    <div id="voteCount" th:text="${'‚ù§Ô∏è '+comment.likeMembers.size()}" style="display:inline;"></div>
                                                    <div th:text="${'üí¨ ' + #lists.size(comment.replies)}" style="display:inline;"></div>
                                                    <div th:text="${'post''s views ' + comment.post.view}" style="display:inline; margin-left:10px;"></div>
                                                </span>
                                        </div>
                                        <div style="font-size:12px; display:inline;" >
                                            <div th:if="${comment.modifyDate != null}">
                                                <span th:text="${#temporals.format(comment.modifyDate, 'yyyyÎÖÑ MMÏõî ddÏùº HH:mm')}"></span>
                                            </div>
                                            <div th:unless="${comment.modifyDate != null}">
                                                <span th:text="${#temporals.format(comment.createDate, 'yyyyÎÖÑ MMÏõî ddÏùº HH:mm')}"></span>
                                            </div>
                                        </div>
                                        <div th:if="${comment.post.category != 'Ïπ¥ÌÖåÍ≥†Î¶¨' && comment.post.category != null}"
                                             th:text="${'Ïπ¥ÌÖåÍ≥†Î¶¨ : ' + comment.post.category}">
                                        </div>
                                    </div>
                                    <div>
<!--                                        <div class="col-md-auto"-->
<!--                                             th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')') or #authorization.expression('hasRole(''ROLE_MANAGER'')')}">-->
<!--                                            <button type="button" class="btn btn-primary admin-btn"-->
<!--                                                    style="margin-right: 0.1rem"-->
<!--                                                    data-bs-toggle="modal"-->
<!--                                                    th:data-bs-target="'#approveModal' + ${post.id}"-->
<!--                                                    th:onclick="'openApproveModal(' + ${post.id} + ')'">Í¥ÄÎ¶¨Ïûê Í≤åÏãúÎ¨º ÏàòÏ†ï-->
<!--                                            </button>-->
<!--                                        </div>-->
                                        <!--                                        Í¥ÄÎ¶¨Ïûê Í≤åÏãúÎ¨º ÏàòÏ†ï Î™®Îã¨Ï∞Ω-->
<!--                                        <div class="modal fade" th:id="'approveModal' + ${post.id}" tabindex="-1"-->
<!--                                             role="dialog"-->
<!--                                             aria-labelledby="'approveModalLabel' + ${post.id}" aria-hidden="true">-->
<!--                                            <div class="modal-dialog" role="document">-->
<!--                                                <div class="modal-content">-->
<!--                                                    <div class="modal-header">-->
<!--                                                        <h5 class="modal-title fw-bold fs-4"-->
<!--                                                            th:id="'approveModalLabel' + ${post.id}">Í≤åÏãúÎ¨º-->
<!--                                                            ÏàòÏ†ï</h5>-->
<!--                                                        <button type="button" class="btn-close" data-bs-dismiss="modal"-->
<!--                                                                aria-label="Close">-->
<!--                                                            <span aria-hidden="true"></span>-->
<!--                                                        </button>-->
<!--                                                    </div>-->
<!--                                                    <div class="modal-body">-->
<!--                                                        Ïó¨Í∏∞Ïóê ÏäπÏù∏ ÌèºÏù¥ÎÇò ÎÇ¥Ïö©ÏùÑ Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî-->
<!--                                                        <form th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')') or #authorization.expression('hasRole(''ROLE_MANAGER'')')}" th:action="@{|/post/updatePostByAdmin/${post.id}|}" method="post"-->
<!--                                                              th:object="${postForm}"-->
<!--                                                              onsubmit="return UpdatePost();">-->
<!--                                                            <input type="hidden" name="postId" th:value="${post.id}">-->
<!--                                                            <div>-->
<!--                                                                <label class="form-label">ÌÉúÍ∑∏ ÏÑ†ÌÉù</label>-->
<!--                                                                <div th:each="tag : ${post.getDefaultTagsToPostTagList(defaultTagList)}">-->
<!--                                                                    <label th:for="${'tag_' + tag.name}">-->
<!--                                                                        <input type="checkbox" id="${'tag_' + tag.name}"-->
<!--                                                                               name="selectedTagNames"-->
<!--                                                                               th:value="${tag.name}"-->
<!--                                                                               th:text="${tag.name}"-->
<!--                                                                               th:checked="${post.getTagList().contains(tag)}">-->
<!--                                                                    </label>-->
<!--                                                                </div>-->
<!--                                                            </div>-->
<!--                                                            <br>-->
<!--                                                            &lt;!&ndash;                                        <option selected>Ïπ¥ÌÖåÍ≥†Î¶¨</option>&ndash;&gt;-->
<!--                                                            Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ†ÌÉù-->
<!--                                                            <div>-->
<!--                                                                <select id="category" name="category"-->
<!--                                                                        class="form-select"-->
<!--                                                                        aria-label="Default select example">-->
<!--                                                                    <option selected>Ïπ¥ÌÖåÍ≥†Î¶¨</option>-->
<!--                                                                    <option value="ÏûêÏú†Í≤åÏãúÌåê"-->
<!--                                                                            th:selected="${post.category == 'ÏûêÏú†Í≤åÏãúÌåê'}">-->
<!--                                                                        ÏûêÏú†Í≤åÏãúÌåê-->
<!--                                                                    </option>-->
<!--                                                                    <option value="QnA"-->
<!--                                                                            th:selected="${post.category == 'QnA'}">QnA-->
<!--                                                                    </option>-->
<!--                                                                </select>-->
<!--                                                            </div>-->
<!--                                                            <br>-->
<!--                                                            <div class="modal-footer">-->
<!--                                                                <button type="submit" class="btn btn-success btn-modal"-->
<!--                                                                        style="margin-top: 15px">ÏàòÏ†ï-->
<!--                                                                </button>-->
<!--                                                                <button type="button"-->
<!--                                                                        class="btn btn-secondary btn-modal"-->
<!--                                                                        style="margin-top: 15px"-->
<!--                                                                        data-bs-dismiss="modal">Îã´Í∏∞-->
<!--                                                                </button>-->
<!--                                                            </div>-->
<!--                                                        </form>-->
<!--                                                    </div>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                        <div class="col-md-auto"-->
<!--                                             th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')') or #authorization.expression('hasRole(''ROLE_MANAGER'')')}">-->
<!--                                            <form th:action="@{|/post/deletePost/${post.id}|}" method="post"-->
<!--                                                  onsubmit="return deletePost()">-->
<!--                                                <button type="submit" class="btn btn-danger admin-btn"-->
<!--                                                        style="margin-right: 2rem">ÏÇ≠Ï†ú-->
<!--                                                </button>-->
<!--                                            </form>-->
<!--                                        </div>-->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ÌéòÏù¥ÏßïÏ≤òÎ¶¨ ÏãúÏûë -->
                    <div th:if="${!paging.isEmpty()}">
                        <ul class="pagination justify-content-center">
                            <li class="page-item" th:classappend="${!paging.hasPrevious} ? 'disabled'">
                                <a class="page-link"
                                   th:href="@{|?page=${paging.number-1}|}">
                                    <span>Ïù¥Ï†Ñ</span>
                                </a>
                            </li>
                            <li th:each="page: ${#numbers.sequence(1, paging.totalPages)}"
                                th:if="${page >= paging.number-5 and page <= paging.number+5}"
                                th:classappend="${page == paging.number+1} ? 'active'"
                                class="page-item">
                                <a th:text="${page}" class="page-link" th:href="@{|?page=${page-1}|}"></a>
                            </li>
                            <li class="page-item" th:classappend="${!paging.hasNext} ? 'disabled'">
                                <a class="page-link" th:href="@{|?page=${paging.number+1}|}">
                                    <span>Îã§Ïùå</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!-- ÌéòÏù¥ÏßïÏ≤òÎ¶¨ ÎÅù -->
                    <!--============================Ïó¨Í∏∞ÍπåÏßÄ eachÎ¨∏ÏúºÎ°ú Ìè¨Ïä§Ìä∏ Ï†ÅÏö©ÌïòÎ©¥ Îê©ÎãàÎã§.=====================================-->
                    <!--============================ÏïÑÎûòÎ∂ÄÎ∂Ñ ÏòàÏãú. Ï∂îÌõÑ ÏÇ≠Ï†ú ÏòàÏ†ï =====================================-->
                </div>
            </div>
        </div>
    </div>
</div>
<script layout:fragment="script" type='text/javascript'>
    function DeleteComment() {
        return confirm("ÎåìÍ∏ÄÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?");
    }
    function UpdateComment() {
        return confirm("ÎåìÍ∏ÄÏùÑ ÏàòÏ†ïÌïòÏãúÍ≤†ÏäµÎãàÍπå?");
    }
    function openApproveCommentModal() {
        $('#approveCommentModal').modal('show');
    }
</script>
</html>